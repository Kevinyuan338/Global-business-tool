<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Business Tool - Time Zones & Exchange Rates</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-globe-americas"></i>
                <h1>Global Business Tool</h1>
            </div>
            <p class="subtitle">Time Zones â€¢ Exchange Rates â€¢ Global Business</p>
        </header>

        <main class="main-content">
            <!-- Time Comparison Module -->
            <div class="time-module">
                <div class="module-header">
                    <h2 class="module-title">Time Comparison</h2>
                </div>
                <div class="time-comparison-grid">
                    <!-- Main Country Selection and Time -->
                    <div class="main-country-section">
                        <div class="main-country-selector">
                            <select id="time-main-country-select" class="main-country-select">
                                <option value="">Select Country</option>
                                <option value="AE">ğŸ‡¦ğŸ‡ª UAE</option>
                                <option value="AR">ğŸ‡¦ğŸ‡· Argentina</option>
                                <option value="AT">ğŸ‡¦ğŸ‡¹ Austria</option>
                                <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                                <option value="BE">ğŸ‡§ğŸ‡ª Belgium</option>
                                <option value="BR">ğŸ‡§ğŸ‡· Brazil</option>
                                <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                                <option value="CH">ğŸ‡¨ğŸ‡­ Switzerland</option>
                                <option value="CL">ğŸ‡¨ğŸ‡± Chile</option>
                                <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
                                <option value="CO">ğŸ‡¨ğŸ‡´ Colombia</option>
                                <option value="CZ">ğŸ‡¨ğŸ‡¿ Czech Republic</option>
                                <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                                <option value="DK">ğŸ‡©ğŸ‡° Denmark</option>
                                <option value="EG">ğŸ‡ªğŸ‡¬ Egypt</option>
                                <option value="ES">ğŸ‡ªğŸ‡¸ Spain</option>
                                <option value="FI">ğŸ‡«ğŸ‡® Finland</option>
                                <option value="FR">ğŸ‡«ğŸ‡· France</option>
                                <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                <option value="GR">ğŸ‡¬ğŸ‡· Greece</option>
                                <option value="HU">ğŸ‡­ğŸ‡º Hungary</option>
                                <option value="ID">ğŸ‡®ğŸ‡© Indonesia</option>
                                <option value="IE">ğŸ‡®ğŸ‡ª Ireland</option>
                                <option value="IL">ğŸ‡®ğŸ‡± Israel</option>
                                <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                                <option value="IT">ğŸ‡®ğŸ‡¹ Italy</option>
                                <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                                <option value="KE">ğŸ‡°ğŸ‡ª Kenya</option>
                                <option value="KR">ğŸ‡°ğŸ‡· South Korea</option>
                                <option value="MA">ğŸ‡²ğŸ‡¦ Morocco</option>
                                <option value="MX">ğŸ‡²ğŸ‡½ Mexico</option>
                                <option value="MY">ğŸ‡²ğŸ‡¾ Malaysia</option>
                                <option value="NG">ğŸ‡³ğŸ‡¬ Nigeria</option>
                                <option value="NL">ğŸ‡³ğŸ‡± Netherlands</option>
                                <option value="NO">ğŸ‡³ğŸ‡´ Norway</option>
                                <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
                                <option value="PE">ğŸ‡µğŸ‡ª Peru</option>
                                <option value="PH">ğŸ‡µğŸ‡­ Philippines</option>
                                <option value="PL">ğŸ‡µğŸ‡± Poland</option>
                                <option value="PT">ğŸ‡µğŸ‡¹ Portugal</option>
                                <option value="RU">ğŸ‡·ğŸ‡º Russia</option>
                                <option value="SA">ğŸ‡¸ğŸ‡¦ Saudi Arabia</option>
                                <option value="SE">ğŸ‡¸ğŸ‡ª Sweden</option>
                                <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                                <option value="TH">ğŸ‡¹ğŸ‡­ Thailand</option>
                                <option value="TR">ğŸ‡¹ğŸ‡· Turkey</option>
                                <option value="US-CHI">ğŸ‡ºğŸ‡¸ Chicago</option>
                                <option value="US-DEN">ğŸ‡ºğŸ‡¸ Denver</option>
                                <option value="US-LA">ğŸ‡ºğŸ‡¸ Los Angeles</option>
                                <option value="US-NY">ğŸ‡ºğŸ‡¸ New York</option>
                                <option value="VN">ğŸ‡»ğŸ‡³ Vietnam</option>
                                <option value="ZA">ğŸ‡¿ğŸ‡¦ South Africa</option>
                            </select>
                        </div>
                        <button class="set-default-btn main-favorite-btn" data-target="time-main" title="Set as Default">
                            <i class="fas fa-star"></i>
                        </button>
                        <div class="time-input-cell">
                            <label for="time-main-date-input" style="font-size: 0.9rem; color: #666; margin-bottom: 5px; display: block;">Set Date & Time (Editable)</label>
                            <div class="custom-datetime-input-inline">
                                <input type="date" id="time-main-date-input" class="time-date-input-inline">
                                <div class="time-selector-inline">
                                    <select id="time-main-hour-input" class="time-hour-select-inline">
                                        <option value="01">1</option>
                                        <option value="02">2</option>
                                        <option value="03">3</option>
                                        <option value="04">4</option>
                                        <option value="05">5</option>
                                        <option value="06">6</option>
                                        <option value="07">7</option>
                                        <option value="08">8</option>
                                        <option value="09">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                    </select>
                                    <span class="time-separator">:</span>
                                    <select id="time-main-minute-input" class="time-minute-select-inline">
                                        <option value="00">00</option>
                                        <option value="05">05</option>
                                        <option value="10">10</option>
                                        <option value="15">15</option>
                                        <option value="20">20</option>
                                        <option value="25">25</option>
                                        <option value="30">30</option>
                                        <option value="35">35</option>
                                        <option value="40">40</option>
                                        <option value="45">45</option>
                                        <option value="50">50</option>
                                        <option value="55">55</option>
                                    </select>
                                    <select id="time-main-ampm-input" class="time-ampm-select-inline">
                                        <option value="AM">AM</option>
                                        <option value="PM">PM</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Comparison Countries Selection -->
                    <div class="comparison-countries-section">
                        <h3>Comparison Countries</h3>
                        <div class="comparison-countries-grid">
                            <div class="comparison-country-cell" id="comparison-country-1">
                                <select id="comparison-select-1" class="comparison-country-select">
                                    <option value="">Select Country</option>
                                </select>
                                <button class="set-default-btn" data-target="1" title="Set as Default">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                            <div class="comparison-country-cell" id="comparison-country-2">
                                <select id="comparison-select-2" class="comparison-country-select">
                                    <option value="">Select Country</option>
                                </select>
                                <button class="set-default-btn" data-target="2" title="Set as Default">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                            <div class="comparison-country-cell" id="comparison-country-3">
                                <select id="comparison-select-3" class="comparison-country-select">
                                    <option value="">Select Country</option>
                                </select>
                                <button class="set-default-btn" data-target="3" title="Set as Default">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                            <div class="comparison-country-cell" id="comparison-country-4">
                                <select id="comparison-select-4" class="comparison-country-select">
                                    <option value="">Select Country</option>
                                </select>
                                <button class="set-default-btn" data-target="4" title="Set as Default">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Comparison Countries Time Display -->
                    <div class="comparison-times-section">
                        <h3>Comparison Times</h3>
                        <div class="comparison-times-grid">
                            <div class="time-display-cell" id="time-comparison-display-1">
                            </div>
                            <div class="time-display-cell" id="time-comparison-display-2">
                            </div>
                            <div class="time-display-cell" id="time-comparison-display-3">
                            </div>
                            <div class="time-display-cell" id="time-comparison-display-4">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Exchange Rate Module -->
            <div class="rate-module">
                <div class="module-header">
                    <h2 class="module-title">Exchange Rate</h2>
                </div>
                <div class="rate-comparison-grid">
                    <!-- Main Country Selection -->
                    <div class="main-country-section">
                        <div class="main-country-selector">
                            <select id="rate-base-country" class="main-country-select rate-main-country-select">
                                <option value="">Select Country</option>
                                <option value="AE">ğŸ‡¦ğŸ‡ª UAE (AED)</option>
                                <option value="AR">ğŸ‡¦ğŸ‡· Argentina (ARS)</option>
                                <option value="AT">ğŸ‡¦ğŸ‡¹ Austria (EUR)</option>
                                <option value="AU">ğŸ‡¦ğŸ‡º Australia (AUD)</option>
                                <option value="BE">ğŸ‡§ğŸ‡ª Belgium (EUR)</option>
                                <option value="BR">ğŸ‡§ğŸ‡· Brazil (BRL)</option>
                                <option value="CA">ğŸ‡¨ğŸ‡¦ Canada (CAD)</option>
                                <option value="CH">ğŸ‡¨ğŸ‡­ Switzerland (CHF)</option>
                                <option value="CL">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                                <option value="CN">ğŸ‡¨ğŸ‡³ China (CNY)</option>
                                <option value="CO">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                                <option value="CZ">ğŸ‡¨ğŸ‡¿ Czech Republic (CZK)</option>
                                <option value="DE">ğŸ‡©ğŸ‡ª Germany (EUR)</option>
                                <option value="DK">ğŸ‡©ğŸ‡° Denmark (DKK)</option>
                                <option value="EG">ğŸ‡ªğŸ‡¬ Egypt (EGP)</option>
                                <option value="ES">ğŸ‡ªğŸ‡¸ Spain (EUR)</option>
                                <option value="FI">ğŸ‡«ğŸ‡® Finland (EUR)</option>
                                <option value="FR">ğŸ‡«ğŸ‡· France (EUR)</option>
                                <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom (GBP)</option>
                                <option value="GR">ğŸ‡¬ğŸ‡· Greece (EUR)</option>
                                <option value="HU">ğŸ‡­ğŸ‡º Hungary (HUF)</option>
                                <option value="ID">ğŸ‡®ğŸ‡© Indonesia (IDR)</option>
                                <option value="IE">ğŸ‡®ğŸ‡ª Ireland (EUR)</option>
                                <option value="IL">ğŸ‡®ğŸ‡± Israel (ILS)</option>
                                <option value="IN">ğŸ‡®ğŸ‡³ India (INR)</option>
                                <option value="IT">ğŸ‡®ğŸ‡¹ Italy (EUR)</option>
                                <option value="JP">ğŸ‡¯ğŸ‡µ Japan (JPY)</option>
                                <option value="KE">ğŸ‡°ğŸ‡ª Kenya (KES)</option>
                                <option value="KR">ğŸ‡°ğŸ‡· South Korea (KRW)</option>
                                <option value="MA">ğŸ‡²ğŸ‡¦ Morocco (MAD)</option>
                                <option value="MX">ğŸ‡²ğŸ‡½ Mexico (MXN)</option>
                                <option value="MY">ğŸ‡²ğŸ‡¾ Malaysia (MYR)</option>
                                <option value="NG">ğŸ‡³ğŸ‡¬ Nigeria (NGN)</option>
                                <option value="NL">ğŸ‡³ğŸ‡± Netherlands (EUR)</option>
                                <option value="NO">ğŸ‡³ğŸ‡´ Norway (NOK)</option>
                                <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand (NZD)</option>
                                <option value="PE">ğŸ‡µğŸ‡ª Peru (PEN)</option>
                                <option value="PH">ğŸ‡µğŸ‡­ Philippines (PHP)</option>
                                <option value="PL">ğŸ‡µğŸ‡± Poland (PLN)</option>
                                <option value="PT">ğŸ‡µğŸ‡¹ Portugal (EUR)</option>
                                <option value="RU">ğŸ‡·ğŸ‡º Russia (RUB)</option>
                                <option value="SA">ğŸ‡¸ğŸ‡¦ Saudi Arabia (SAR)</option>
                                <option value="SE">ğŸ‡¸ğŸ‡ª Sweden (SEK)</option>
                                <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore (SGD)</option>
                                <option value="TH">ğŸ‡¹ğŸ‡­ Thailand (THB)</option>
                                <option value="TR">ğŸ‡¹ğŸ‡· Turkey (TRY)</option>
                                <option value="US">ğŸ‡ºğŸ‡¸ United States (USD)</option>
                                <option value="VN">ğŸ‡»ğŸ‡³ Vietnam (VND)</option>
                                <option value="ZA">ğŸ‡¿ğŸ‡¦ South Africa (ZAR)</option>
                            </select>
                        </div>
                        <button class="set-default-btn main-favorite-btn" data-target="rate-main" title="Set as Default">
                            <i class="fas fa-star"></i>
                        </button>
                        <div class="rate-display-cell">
                            <div class="rate-display">
                                <input type="number" id="rate-main-value" class="rate-value-input" value="" step="0.0001" min="0" placeholder="INPUT NUMBERS">
                                <div class="rate-currency" id="rate-main-currency"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Comparison Countries Selection -->
                    <div class="comparison-countries-section">
                        <h3>Comparison Countries</h3>
                        <div class="comparison-countries-grid">
                            <div class="comparison-country-cell" id="rate-comparison-country-1">
                                <select id="rate-comparison-select-1" class="comparison-country-select">
                                    <option value="">Select Country</option>
                                </select>
                                <button class="set-default-btn" data-target="rate-1" title="Set as Default">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                            <div class="comparison-country-cell" id="rate-comparison-country-2">
                                <select id="rate-comparison-select-2" class="comparison-country-select">
                                    <option value="">Select Country</option>
                                </select>
                                <button class="set-default-btn" data-target="rate-2" title="Set as Default">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                            <div class="comparison-country-cell" id="rate-comparison-country-3">
                                <select id="rate-comparison-select-3" class="comparison-country-select">
                                    <option value="">Select Country</option>
                                </select>
                                <button class="set-default-btn" data-target="rate-3" title="Set as Default">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                            <div class="comparison-country-cell" id="rate-comparison-country-4">
                                <select id="rate-comparison-select-4" class="comparison-country-select">
                                    <option value="">Select Country</option>
                                </select>
                                <button class="set-default-btn" data-target="rate-4" title="Set as Default">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Comparison Countries Rate Display -->
                    <div class="comparison-rates-section">
                        <h3>Exchange Rates</h3>
                        <div class="comparison-rates-grid">
                            <div class="rate-display-cell" id="rate-comparison-display-1">
                            </div>
                            <div class="rate-display-cell" id="rate-comparison-display-2">
                            </div>
                            <div class="rate-display-cell" id="rate-comparison-display-3">
                            </div>
                            <div class="rate-display-cell" id="rate-comparison-display-4">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="rate-info">
                    <div class="info-item">
                        <span class="info-label">Data Source:</span>
                        <span class="info-value">ExchangeRate-API</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Last Updated:</span>
                        <span class="info-value" id="update-time">--</span>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2024 Cross-Timezone Exchange Rate Tool | Data Source: ExchangeRate-API</p>
        </footer>
    </div>

    <div class="loading-overlay" id="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; justify-content: center; align-items: center;">
        <div class="loading-spinner" style="background: white; padding: 20px; border-radius: 5px; text-align: center;">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Fetching latest exchange rates...</p>
        </div>
    </div>

    <!-- ç¡®è®¤å¯¹è¯æ¡† -->
    <div class="confirmation-dialog" id="confirmation-dialog">
        <div class="confirmation-dialog-content">
            <h3>Add to Favorites</h3>
            <p id="confirmation-message">Are you sure you want to add this country to your favorites?</p>
            <div class="confirmation-dialog-buttons">
                <button class="confirmation-dialog-btn cancel" id="cancel-btn">Cancel</button>
                <button class="confirmation-dialog-btn confirm" id="confirm-btn">Add to Favorites</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    
    <!-- è°ƒè¯•åŠŸèƒ½ -->
    <script>
        // æ·»åŠ è°ƒè¯•åŠŸèƒ½åˆ°å…¨å±€ä½œç”¨åŸŸ
        window.debugRateModule = function() {
            console.log('=== è°ƒè¯•æ±‡ç‡æ¨¡å— ===');
            
            // 1. æ£€æŸ¥DOMå…ƒç´ 
            console.log('1. æ£€æŸ¥DOMå…ƒç´ :');
            const rateBaseCountry = document.getElementById('rate-base-country');
            const rateMainValue = document.getElementById('rate-main-value');
            const rateMainCurrency = document.getElementById('rate-main-currency');
            
            console.log('rate-base-country:', rateBaseCountry ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');
            console.log('rate-main-value:', rateMainValue ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');
            console.log('rate-main-currency:', rateMainCurrency ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');
            
            // 2. æ£€æŸ¥æ¯”è¾ƒå›½å®¶é€‰æ‹©å™¨
            console.log('2. æ£€æŸ¥æ¯”è¾ƒå›½å®¶é€‰æ‹©å™¨:');
            for (let i = 1; i <= 4; i++) {
                const select = document.getElementById(`rate-comparison-select-${i}`);
                const display = document.getElementById(`rate-comparison-display-${i}`);
                console.log(`æ¯”è¾ƒå›½å®¶ ${i}:`, {
                    select: select ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨',
                    display: display ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨',
                    value: select ? select.value : 'N/A'
                });
            }
            
            // 3. æ£€æŸ¥æ±‡ç‡æ•°æ®
            console.log('3. æ£€æŸ¥æ±‡ç‡æ•°æ®:');
            console.log('currentRates:', window.currentRates);
            console.log('æ±‡ç‡æ•°æ®é”®æ•°é‡:', Object.keys(window.currentRates || {}).length);
            
            // 4. æµ‹è¯•æ±‡ç‡è½¬æ¢
            console.log('4. æµ‹è¯•æ±‡ç‡è½¬æ¢:');
            if (window.updateRateDisplay) {
                console.log('è°ƒç”¨ updateRateDisplay...');
                window.updateRateDisplay();
                console.log('updateRateDisplay è°ƒç”¨å®Œæˆ');
            } else {
                console.log('updateRateDisplay å‡½æ•°ä¸å­˜åœ¨ï¼');
            }
            
            console.log('=== è°ƒè¯•å®Œæˆ ===');
        };
        
        // å¿«é€Ÿæµ‹è¯•å‡½æ•°
        window.quickTestRate = function() {
            console.log('=== å¿«é€Ÿæµ‹è¯•æ±‡ç‡è½¬æ¢ ===');
            
            // è®¾ç½®æµ‹è¯•æ•°æ®
            const rateBaseCountry = document.getElementById('rate-base-country');
            const rateMainValue = document.getElementById('rate-main-value');
            
            if (rateBaseCountry) {
                rateBaseCountry.value = 'US';
                console.log('è®¾ç½®ä¸»å›½å®¶ä¸º: US');
            }
            
            if (rateMainValue) {
                rateMainValue.value = '100';
                console.log('è®¾ç½®è¾“å…¥å€¼ä¸º: 100');
            }
            
            // è®¾ç½®æ¯”è¾ƒå›½å®¶
            const select1 = document.getElementById('rate-comparison-select-1');
            const select2 = document.getElementById('rate-comparison-select-2');
            
            if (select1) {
                select1.value = 'CN';
                console.log('è®¾ç½®æ¯”è¾ƒå›½å®¶1ä¸º: CN');
            }
            
            if (select2) {
                select2.value = 'JP';
                console.log('è®¾ç½®æ¯”è¾ƒå›½å®¶2ä¸º: JP');
            }
            
            // è§¦å‘æ›´æ–°
            if (window.updateRateDisplay) {
                window.updateRateDisplay();
            }
            
            console.log('=== å¿«é€Ÿæµ‹è¯•å®Œæˆ ===');
        };
        
        // å¼ºåˆ¶è®¾ç½®æ±‡ç‡æ•°æ®å¹¶æµ‹è¯•
        window.forceSetRates = function() {
            console.log('=== å¼ºåˆ¶è®¾ç½®æ±‡ç‡æ•°æ® ===');
            
            // è®¾ç½®æ¨¡æ‹Ÿæ±‡ç‡æ•°æ®
            window.currentRates = {
                'CNY': 7.11,
                'JPY': 146.61,
                'EUR': 0.85,
                'GBP': 0.73,
                'VND': 24000,
                'DKK': 6.5,
                'EGP': 30.5
            };
            
            console.log('è®¾ç½®æ±‡ç‡æ•°æ®:', window.currentRates);
            
            // è®¾ç½®æµ‹è¯•ç¯å¢ƒ
            const rateBaseCountry = document.getElementById('rate-base-country');
            const rateMainValue = document.getElementById('rate-main-value');
            
            if (rateBaseCountry) {
                rateBaseCountry.value = 'US';
                console.log('è®¾ç½®ä¸»å›½å®¶ä¸º: US');
            }
            
            if (rateMainValue) {
                rateMainValue.value = '100';
                console.log('è®¾ç½®è¾“å…¥å€¼ä¸º: 100');
            }
            
            // è®¾ç½®æ¯”è¾ƒå›½å®¶
            const select1 = document.getElementById('rate-comparison-select-1');
            const select2 = document.getElementById('rate-comparison-select-2');
            
            if (select1) {
                select1.value = 'CN';
                console.log('è®¾ç½®æ¯”è¾ƒå›½å®¶1ä¸º: CN');
            }
            
            if (select2) {
                select2.value = 'JP';
                console.log('è®¾ç½®æ¯”è¾ƒå›½å®¶2ä¸º: JP');
            }
            
            // ä½¿ç”¨æ ¸å¿ƒçš„ updateRateDisplay å‡½æ•°æ›´æ–°æ˜¾ç¤º
            console.log('ä½¿ç”¨æ ¸å¿ƒå‡½æ•°æ›´æ–°æ˜¾ç¤º...');
            if (window.updateRateDisplay) {
                window.updateRateDisplay();
                console.log('æ˜¾ç¤ºæ›´æ–°å®Œæˆ');
            } else {
                console.log('updateRateDisplay å‡½æ•°ä¸å­˜åœ¨ï¼');
            }
            
            console.log('=== å¼ºåˆ¶è®¾ç½®å®Œæˆ ===');
        };
        
        // å¼ºåˆ¶è·å–æ±‡ç‡æ•°æ®
        window.forceFetchRates = function() {
            console.log('=== å¼ºåˆ¶è·å–æ±‡ç‡æ•°æ® ===');
            
            // è®¾ç½®æµ‹è¯•ä¸»å›½å®¶
            const rateBaseCountry = document.getElementById('rate-base-country');
            if (rateBaseCountry) {
                rateBaseCountry.value = 'US';
                console.log('è®¾ç½®ä¸»å›½å®¶ä¸º: US');
            }
            
            // è®¾ç½®æ¯”è¾ƒå›½å®¶
            const select1 = document.getElementById('rate-comparison-select-1');
            const select2 = document.getElementById('rate-comparison-select-2');
            
            if (select1) {
                select1.value = 'CN';
                console.log('è®¾ç½®æ¯”è¾ƒå›½å®¶1ä¸º: CN');
            }
            
            if (select2) {
                select2.value = 'JP';
                console.log('è®¾ç½®æ¯”è¾ƒå›½å®¶2ä¸º: JP');
            }
            
            // è®¾ç½®è¾“å…¥å€¼
            const rateMainValue = document.getElementById('rate-main-value');
            if (rateMainValue) {
                rateMainValue.value = '100';
                console.log('è®¾ç½®è¾“å…¥å€¼ä¸º: 100');
            }
            
            // å¼ºåˆ¶è°ƒç”¨API
            if (window.fetchExchangeRates) {
                console.log('å¼€å§‹è°ƒç”¨ fetchExchangeRates...');
                window.fetchExchangeRates().then(() => {
                    console.log('å¼ºåˆ¶è·å–æ±‡ç‡æ•°æ®å®Œæˆ');
                    console.log('å½“å‰æ±‡ç‡æ•°æ®:', window.currentRates);
                    console.log('æ±‡ç‡æ•°æ®é”®æ•°é‡:', Object.keys(window.currentRates || {}).length);
                    
                    // æ›´æ–°æ˜¾ç¤º
                    if (window.updateRateDisplay) {
                        window.updateRateDisplay();
                    }
                }).catch(error => {
                    console.error('å¼ºåˆ¶è·å–æ±‡ç‡æ•°æ®å¤±è´¥:', error);
                    console.log('å°è¯•ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®...');
                    
                    // å¦‚æœAPIå¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                    if (window.loadMockData) {
                        window.loadMockData();
                    }
                });
            } else {
                console.log('fetchExchangeRates å‡½æ•°ä¸å­˜åœ¨ï¼');
            }
        };
        
        // å¼ºåˆ¶åˆå§‹åŒ–æ±‡ç‡æ•°æ®ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
        window.forceInitRates = function() {
            console.log('=== å¼ºåˆ¶åˆå§‹åŒ–æ±‡ç‡æ•°æ® ===');
            
            // è®¾ç½®æµ‹è¯•ç¯å¢ƒ
            const rateBaseCountry = document.getElementById('rate-base-country');
            const rateMainValue = document.getElementById('rate-main-value');
            
            if (rateBaseCountry) {
                rateBaseCountry.value = 'US';
                console.log('è®¾ç½®ä¸»å›½å®¶ä¸º: US');
            }
            
            if (rateMainValue) {
                rateMainValue.value = '100';
                console.log('è®¾ç½®è¾“å…¥å€¼ä¸º: 100');
            }
            
            // è®¾ç½®æ¯”è¾ƒå›½å®¶
            const select1 = document.getElementById('rate-comparison-select-1');
            const select2 = document.getElementById('rate-comparison-select-2');
            
            if (select1) {
                select1.value = 'CN';
                console.log('è®¾ç½®æ¯”è¾ƒå›½å®¶1ä¸º: CN');
            }
            
            if (select2) {
                select2.value = 'JP';
                console.log('è®¾ç½®æ¯”è¾ƒå›½å®¶2ä¸º: JP');
            }
            
            // å¼ºåˆ¶è®¾ç½®æ±‡ç‡æ•°æ®
            window.currentRates = {
                'USD': 1.0,
                'CNY': 7.11,
                'JPY': 146.61,
                'EUR': 0.85,
                'GBP': 0.73,
                'VND': 24000,
                'DKK': 6.5,
                'EGP': 30.5
            };
            
            console.log('æ±‡ç‡æ•°æ®å·²è®¾ç½®:', window.currentRates);
            console.log('æ±‡ç‡æ•°æ®é”®æ•°é‡:', Object.keys(window.currentRates).length);
            
            // æ›´æ–°æ˜¾ç¤º
            if (window.updateRateDisplay) {
                window.updateRateDisplay();
                console.log('æ˜¾ç¤ºå·²æ›´æ–°');
            }
            
            console.log('=== å¼ºåˆ¶åˆå§‹åŒ–å®Œæˆ ===');
        };
        
        // æµ‹è¯•æ±‡ç‡æ”¶è—åŠŸèƒ½
        window.testRateFavorites = function() {
            console.log('=== æµ‹è¯•æ±‡ç‡æ”¶è—åŠŸèƒ½ ===');
            
            // 1. è®¾ç½®æµ‹è¯•æ”¶è—
            console.log('è®¾ç½®æµ‹è¯•æ”¶è—...');
            window.rateComparisonCountries = ['CN', 'JP', 'GB', 'DE'];
            window.rateMainCountry = 'US';
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('rateComparisonCountries', JSON.stringify(window.rateComparisonCountries));
            localStorage.setItem('rateMainCountry', window.rateMainCountry);
            
            console.log('æ±‡ç‡æ¯”è¾ƒå›½å®¶æ”¶è—:', window.rateComparisonCountries);
            console.log('æ±‡ç‡ä¸»å›½å®¶æ”¶è—:', window.rateMainCountry);
            
            // 2. åº”ç”¨æ”¶è—
            console.log('åº”ç”¨æ”¶è—...');
            if (window.applyRateFavorites) {
                window.applyRateFavorites();
            }
            
            // 3. æ£€æŸ¥ç»“æœ
            console.log('æ£€æŸ¥ç»“æœ...');
            const rateBaseCountry = document.getElementById('rate-base-country');
            console.log('æ±‡ç‡ä¸»å›½å®¶é€‰æ‹©å™¨å€¼:', rateBaseCountry ? rateBaseCountry.value : 'N/A');
            
            for (let i = 1; i <= 4; i++) {
                const select = document.getElementById(`rate-comparison-select-${i}`);
                console.log(`æ±‡ç‡æ¯”è¾ƒé€‰æ‹©å™¨ ${i}:`, select ? select.value : 'N/A');
            }
            
            console.log('=== æµ‹è¯•å®Œæˆ ===');
        };
        
        // æ‰‹åŠ¨è®¾ç½®æ±‡ç‡å¯¹æ¯”å›½å®¶æ”¶è—
        window.setRateComparisonFavorites = function(countries) {
            console.log('=== æ‰‹åŠ¨è®¾ç½®æ±‡ç‡å¯¹æ¯”å›½å®¶æ”¶è— ===');
            console.log('è®¾ç½®æ”¶è—å›½å®¶:', countries);
            
            // è®¾ç½®æ”¶è—
            window.rateComparisonCountries = countries;
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('rateComparisonCountries', JSON.stringify(countries));
            
            // åº”ç”¨æ”¶è—
            if (window.applyRateFavorites) {
                window.applyRateFavorites();
            }
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            if (window.updateRateComparisonButtons) {
                window.updateRateComparisonButtons();
            }
            
            console.log('æ”¶è—è®¾ç½®å®Œæˆ');
        };
        
        // æ£€æŸ¥å½“å‰æ±‡ç‡æ”¶è—çŠ¶æ€
        window.checkRateFavorites = function() {
            console.log('=== æ£€æŸ¥å½“å‰æ±‡ç‡æ”¶è—çŠ¶æ€ ===');
            
            // ä»æœ¬åœ°å­˜å‚¨è¯»å–
            const storedRateComparison = localStorage.getItem('rateComparisonCountries');
            const storedRateMain = localStorage.getItem('rateMainCountry');
            
            console.log('æœ¬åœ°å­˜å‚¨çš„æ±‡ç‡æ¯”è¾ƒå›½å®¶:', storedRateComparison);
            console.log('æœ¬åœ°å­˜å‚¨çš„æ±‡ç‡ä¸»å›½å®¶:', storedRateMain);
            
            // æ£€æŸ¥å½“å‰å˜é‡
            console.log('å½“å‰æ±‡ç‡æ¯”è¾ƒå›½å®¶å˜é‡:', window.rateComparisonCountries);
            console.log('å½“å‰æ±‡ç‡ä¸»å›½å®¶å˜é‡:', window.rateMainCountry);
            
            // æ£€æŸ¥DOMçŠ¶æ€
            const rateBaseCountry = document.getElementById('rate-base-country');
            console.log('æ±‡ç‡ä¸»å›½å®¶é€‰æ‹©å™¨å€¼:', rateBaseCountry ? rateBaseCountry.value : 'N/A');
            
            for (let i = 1; i <= 4; i++) {
                const select = document.getElementById(`rate-comparison-select-${i}`);
                console.log(`æ±‡ç‡æ¯”è¾ƒé€‰æ‹©å™¨ ${i}:`, select ? select.value : 'N/A');
            }
            
            console.log('=== æ£€æŸ¥å®Œæˆ ===');
        };
        
        // æµ‹è¯•æ±‡ç‡æ”¶è—æŒä¹…åŒ–
        window.testRateFavoritesPersistence = function() {
            console.log('=== æµ‹è¯•æ±‡ç‡æ”¶è—æŒä¹…åŒ– ===');
            
            // 1. è®¾ç½®æµ‹è¯•æ”¶è—
            console.log('è®¾ç½®æµ‹è¯•æ”¶è—...');
            const testCountries = ['CN', 'JP', 'GB', 'DE'];
            
            // è®¾ç½®æ”¶è—
            window.rateComparisonCountries = testCountries;
            localStorage.setItem('rateComparisonCountries', JSON.stringify(testCountries));
            
            console.log('æ”¶è—çš„å›½å®¶:', testCountries);
            
            // 2. åº”ç”¨æ”¶è—
            console.log('åº”ç”¨æ”¶è—...');
            if (window.applyRateFavorites) {
                window.applyRateFavorites();
            }
            
            // 3. æ£€æŸ¥ç»“æœ
            console.log('æ£€æŸ¥ç»“æœ...');
            for (let i = 1; i <= 4; i++) {
                const select = document.getElementById(`rate-comparison-select-${i}`);
                const btn = document.querySelector(`[data-target="rate-${i}"]`);
                console.log(`é€‰æ‹©å™¨ ${i}:`, select ? select.value : 'N/A');
                console.log(`æŒ‰é’® ${i} çŠ¶æ€:`, btn ? (btn.classList.contains('active') ? 'ACTIVE' : 'INACTIVE') : 'N/A');
            }
            
            console.log('=== æµ‹è¯•å®Œæˆ ===');
        };
        
        // æ¸…é™¤æ±‡ç‡æ”¶è—
        window.clearRateFavorites = function() {
            console.log('=== æ¸…é™¤æ±‡ç‡æ”¶è— ===');
            window.rateComparisonCountries = [];
            window.rateMainCountry = '';
            localStorage.removeItem('rateComparisonCountries');
            localStorage.removeItem('rateMainCountry');
            console.log('æ±‡ç‡æ”¶è—å·²æ¸…é™¤');
            
            // é‡æ–°åº”ç”¨æ”¶è—ï¼ˆåº”è¯¥æ˜¯ç©ºçš„ï¼‰
            if (window.applyRateFavorites) {
                window.applyRateFavorites();
            }
        };
        
        // è°ƒè¯•æ±‡ç‡æ”¶è—æ¢å¤é—®é¢˜
        window.debugRateFavoritesRestore = function() {
            console.log('=== è°ƒè¯•æ±‡ç‡æ”¶è—æ¢å¤é—®é¢˜ ===');
            
            // 1. æ£€æŸ¥æœ¬åœ°å­˜å‚¨
            console.log('1. æ£€æŸ¥æœ¬åœ°å­˜å‚¨:');
            const storedRateComparison = localStorage.getItem('rateComparisonCountries');
            const storedRateMain = localStorage.getItem('rateMainCountry');
            console.log('å­˜å‚¨çš„æ±‡ç‡æ¯”è¾ƒå›½å®¶:', storedRateComparison);
            console.log('å­˜å‚¨çš„æ±‡ç‡ä¸»å›½å®¶:', storedRateMain);
            
            // 2. æ£€æŸ¥å½“å‰å˜é‡
            console.log('2. æ£€æŸ¥å½“å‰å˜é‡:');
            console.log('rateComparisonCountries:', window.rateComparisonCountries);
            console.log('rateMainCountry:', window.rateMainCountry);
            
            // 3. æ£€æŸ¥DOMçŠ¶æ€
            console.log('3. æ£€æŸ¥DOMçŠ¶æ€:');
            const rateBaseCountry = document.getElementById('rate-base-country');
            console.log('æ±‡ç‡ä¸»å›½å®¶é€‰æ‹©å™¨å€¼:', rateBaseCountry ? rateBaseCountry.value : 'N/A');
            
            for (let i = 1; i <= 4; i++) {
                const select = document.getElementById(`rate-comparison-select-${i}`);
                const btn = document.querySelector(`[data-target="rate-${i}"]`);
                console.log(`é€‰æ‹©å™¨ ${i}:`, select ? select.value : 'N/A');
                console.log(`æŒ‰é’® ${i} çŠ¶æ€:`, btn ? (btn.classList.contains('active') ? 'ACTIVE' : 'INACTIVE') : 'N/A');
            }
            
            // 4. æ‰‹åŠ¨æ¢å¤æ”¶è—
            console.log('4. æ‰‹åŠ¨æ¢å¤æ”¶è—:');
            if (storedRateComparison) {
                const countries = JSON.parse(storedRateComparison);
                console.log('è§£æçš„æ”¶è—å›½å®¶:', countries);
                
                // è®¾ç½®å˜é‡
                window.rateComparisonCountries = countries;
                
                // åº”ç”¨æ”¶è—
                if (window.applyRateFavorites) {
                    window.applyRateFavorites();
                    console.log('æ”¶è—å·²åº”ç”¨');
                }
            }
            
            console.log('=== è°ƒè¯•å®Œæˆ ===');
        };
        
        // è°ƒè¯•åˆ†é’Ÿæ˜¾ç¤ºé—®é¢˜
        function debugMinuteDisplay() {
            console.log('=== è°ƒè¯•åˆ†é’Ÿæ˜¾ç¤ºé—®é¢˜ ===');
            const minuteInput = document.getElementById('time-main-minute-input');
            if (minuteInput) {
                console.log('åˆ†é’Ÿé€‰æ‹©å™¨å…ƒç´ :', minuteInput);
                console.log('åˆ†é’Ÿé€‰æ‹©å™¨å€¼:', minuteInput.value);
                console.log('åˆ†é’Ÿé€‰æ‹©å™¨é€‰é¡¹æ•°é‡:', minuteInput.options.length);
                console.log('åˆ†é’Ÿé€‰æ‹©å™¨é€‰é¡¹:', Array.from(minuteInput.options).map(opt => opt.value));
                console.log('å½“å‰é€‰ä¸­é€‰é¡¹:', minuteInput.selectedIndex, minuteInput.options[minuteInput.selectedIndex]);
            } else {
                console.error('åˆ†é’Ÿé€‰æ‹©å™¨å…ƒç´ æœªæ‰¾åˆ°');
            }
            
            // æ£€æŸ¥å½“å‰æ—¶é—´
            const now = new Date();
            console.log('å½“å‰æ—¶é—´:', now);
            console.log('å½“å‰åˆ†é’Ÿ:', now.getMinutes());
            console.log('å››èˆäº”å…¥åˆ°5åˆ†é’Ÿ:', Math.round(now.getMinutes() / 5) * 5);
        }
        
        // å¼ºåˆ¶è®¾ç½®åˆ†é’Ÿå€¼
        function forceSetMinute(minute) {
            const minuteInput = document.getElementById('time-main-minute-input');
            if (minuteInput) {
                const minuteStr = minute.toString().padStart(2, '0');
                minuteInput.value = minuteStr;
                console.log('å¼ºåˆ¶è®¾ç½®åˆ†é’Ÿå€¼:', minuteStr);
            }
        }
    </script>
</body>
</html>
