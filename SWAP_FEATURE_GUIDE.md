# 国家和主国家一键换位功能使用指南

## 功能概述

新增的国家和主国家一键换位功能允许用户快速将对比国家设为主国家，同时将原主国家变为对比国家，提高使用效率。

## 功能特性

### 1. 换位按钮
- 每个对比国家选择器旁边都有一个换位按钮（🔄图标）
- 点击即可将对应的对比国家设为主国家，原主国家变为对比国家
- 按钮在未选择国家时自动禁用

### 2. 动画效果
- 换位按钮点击时有旋转动画效果
- 成功换位后显示绿色成功提示
- 错误操作时显示红色错误提示

### 3. 键盘快捷键
- **Ctrl/Cmd + 1-4**: 快速换位对应位置的对比国家
- 根据当前焦点自动判断是时间模块还是汇率模块
- 默认操作时间模块

### 4. 响应式设计
- 移动设备上按钮大小自动调整
- 触摸友好的交互设计
- 适配不同屏幕尺寸

## 使用方法

### 方法一：点击换位按钮
1. 选择主国家
2. 选择要设为主国家的对比国家
3. 点击对应的换位按钮（🔄）
4. 系统自动将对比国家设为主国家，原主国家变为对比国家，并显示成功提示

### 方法二：使用键盘快捷键
1. 确保已选择主国家和对比国家
2. 按 **Ctrl/Cmd + 数字键(1-4)** 快速换位
3. 系统根据当前焦点自动判断操作模块

## 支持的功能

### 时间模块换位
- 将对比国家设为主国家，原主国家变为对比国家
- 自动更新时间显示
- 保持时间输入设置

### 汇率模块换位
- 将对比国家设为主国家，原主国家变为对比国家
- 自动重新获取汇率数据
- 更新汇率显示

## 错误处理

### 常见错误提示
- "Please select a main country first" - 主国家未选择
- "Please select a comparison country to swap" - 对比国家未选择

### 错误提示样式
- 红色背景，白色文字
- 自动3秒后消失
- 包含错误图标

## 成功提示

### 成功提示样式
- 绿色背景，白色文字
- 包含成功图标
- 自动3秒后消失

## 技术实现

### 核心函数
- `handleTimeSwap(targetIndex)` - 处理时间模块换位
- `handleRateSwap(targetIndex)` - 处理汇率模块换位
- `showSwapSuccess(message)` - 显示成功提示
- `showSwapError(message)` - 显示错误提示

### 测试函数
- `testSwapFunction()` - 基础换位功能测试
- `testSwapButtonStates()` - 按钮状态测试
- `testSwapFunctionComplete()` - 综合功能测试

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 注意事项

1. 换位操作会立即生效，无法撤销
2. 汇率模块换位后会重新获取汇率数据
3. 换位操作不会影响收藏设置
4. 快捷键在输入框中不会触发，避免误操作

## 更新日志

### v1.0.0 (2025-01-27)
- 新增国家和主国家一键换位功能
- 添加换位动画效果
- 实现键盘快捷键支持
- 优化移动设备体验
- 添加用户友好的提示信息